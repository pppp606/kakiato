# AIの時代 テキストデータに身体性を持たせる試み

## なぜ作ったか（いきなり抽象的な話）
- 「AIには身体性が無い」のが限界という言説
  - 身体性を過剰に評価している気がする
  - 人間の方がセンサーが多く持っている、インプットするデータの解像度が高いぐらいの差だと思う
- LLMが扱うテキストデータには身体性がない
  - これは間違いない事実
  - 文字そのものには身体性はないが、文字を書く（キーボードを打つ）という行為には身体性がある
  - 同じ文字列でも悩みながら何度も書き直したテキストと、興奮して出来る限りのスピードで入力したテキストの意味はたぶん違う
- 文字を書く行為の身体性をテキストのメタデータとして保存したい

## 作ったもの
- テキストを書く行為を記録・再生するライブラリ
- キーイベントを全てキャプチャしてリズム、修正、ポーズなどの情報を保存
- 入力時の挙動を再現して再生

### ライブラリの構成

#### core
スキーマと型の定義を提供するコアモジュール。以下の型を定義している：
- `KakiatoDocument`: 記録全体を表すドキュメント形式（バージョン、セッション情報、初期テキスト、イベント配列）
- `KakiatoEvent`: キーボード、入力、IME、選択、フォーカスなど各種イベントの型
- `KakiatoSessionMeta`: セッション情報（デバイス、ユーザーエージェント、言語など）

#### recorder
テキスト編集イベントをキャプチャしてKakiato形式のデータを生成するモジュール。
- `KakiatoRecorder`: メインのレコーダークラス
  - `start()`: 記録開始
  - `stop()`: 記録停止
  - `export()`: JSON/NDJSON形式でエクスポート
- 各種イベントハンドラ：
  - KeyboardHandler: キーダウン・キーアップを記録
  - InputHandler: beforeinput/inputイベントを記録
  - CompositionHandler: IME入力を記録
  - SelectionHandler: テキスト選択を記録
  - FocusHandler: フォーカスイベントを記録

#### player
Kakiato形式のデータを読み取って再生するモジュール。
- `KakiatoPlayer`: メインのプレイヤークラス
  - `load()`: ドキュメントを読み込み
  - `play()` / `pause()`: 再生・一時停止
  - `seek()`: 任意の時点にジャンプ
  - `setSpeed()`: 再生速度の変更
- `PlaybackEngine`: イベントのタイミング制御
- `StateReconstructor`: イベントからテキスト状態を再構築
- `TextViewer`: テキストと選択範囲を可視化するビューワー

## デモ
- https://kakiato.dev

## どんな事に使えそうか
- 感情分析
  - テキストの感情だけでなく、入力時のリズムや修正の仕方からも感情を推測できるかも
- ライティング支援


## 今後やりたいこと
- ライブラリを使って色々なアプリを作る
  - WebSocketでリアルタイムに共有するチャットとか
  - vsCodeの拡張機能化とか
  - 写経とか
- 収集するデータの拡張
  - 入力中の環境音とか、心拍情報とか


## まとめ
- エンジニアもどんどん抽象的な話をしてよい（しないと意味がない）時代という気がする
